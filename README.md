# ledger_qatesting_realworld01
Realworld Conduit backend in Node, deployed on Docker.
Frontend testing with Selenium+Pytest
Api testing with Python requests+Pytest

# Note: you should have received the access to a throwout GitHub profile to use this repo as collaborator + access token to clone. If not please contact me.

# Run the testing pipeline inside GitHub Workflows in a browser:
  - The Workflow is set to be ran manually, not on push, to run the workflow:
    - Navigate to the repo Workflow Actions page:
        https://github.com/JackDoe01/ledger_qatesting_realworld01/actions
    - Click "QAtesting" button into the leftside panel named "Actions"
    - Click the "Run workflow" button now displayed in the center page box, on the rightside.
      - Click the green "Run workflow" popup button
     - Monitor execution:
      # A runner panel named "QAtesting" must be spawn in the center page
      - Click the runner container, to monitor the test pipeline workflow --> click again the newly displayed "build" button
     - Read the logs and the tests reports:
      # The testing pipeline will upload 2 artifacts folder, zipped files:
        # logs.zip = contains all the Python pytest pipeline logs
        # reports.zip = contains the .json files generated by each test (requests data, web elements data etc)
                        plus the .xml pytest report file.
                        
 # Run the testing pipeline on a local machine:
  # System requirements:
      OS: Ubuntu20.04
    
      System Dependencies:
        google-chrome-stable 111.0.5563.146
        chromedriver  ### file location: /usr/bin/chromedriver 
        docker24
        Python3.8.10
        Python3-pip
        node12
        npm6
        
  # To run the testing pipeline:
    - Clone the repo:
        git clone https://github.com/JackDoe01/ledger_qatesting_realworld01
        cd ledger_qatesting_realworld01
    - Build the docker image:
        docker build . -t realworldtest01
    - Run the backend server:
        docker run -p 3000:3000 -d realworldtest01
        # run the server with TTY displayed to read requests live logs:
          docker run -p 3000:3000 -it realworldtest01
        ### NOTE: wait for the server to be fully up to avoid tests crashes, takes few seconds.
      # Now both the website backend and the API will answer to localhost on port 3000.
        - check the website is responding via browser:
            http://localhost:3000/
        - check the API is responding:
            http://localhost:3000/api/
        # The backend is fully containerized and data are saved in an instance of SQLite database.    
           
     - Run the testing pipeline:
        cd ../ledger_qatesting_realworld01/QAtesting
        - Install python dependencies:
            python3 -m pip install -r ./requirements.txt
        - Run the testing pypeline with pytest:
            pytest --junitxml=./reports/pytest_report.xml -s TestOperator.py
            
            - Read the logs and the tests reports:
               # The testing pipeline will output pytest logs and test reports here:
                  # all python logs for the entire pipeline;
                      ../ledger_qatesting_realworld01/QAtesting/logs 
                  # json files with reports for every test (requests data, web elements etc)
                    + pytest .xml report:
                      ../ledger_qatesting_realworld01/QAtesting/reports 
         ### NOTES:
          - The container has persistency among respawn, 
            to run the test n.1 again without fail, update the default user data
            into the ../ledger_qatesting_realworld01/QAtesting/config.py file
            with a different email and username. Not necessary on GitHub Workflows = no persistency.
            
          - Comment the test n.1 into TestOperator.py to run multiple tests on a created user.
                  
# PROJECT OVERVIEW
    # By the Ledger tech assessment assignment, the project fully runs in a local env.
      The backend is containerized and data are saved in an instance of SQLite database, 
      running inside a docker image, with data persistency.
      
    # The backend runs a node server + SQLite database in a docker container
      answering to http://localhost:3000
      
    # The reporting system consists in:
        - pytest .xml file generation
        - .json files generation for all tests
        - full logging of the entire python testing pypeline
        
    # You can switch selenium in "not headless" mode changin the headless option to False,
      inside the /QAtesting/lib/BrowsersDrivers/ChromeDriver.py module, to see the tests performing.
    
    # Tests overview:
        # All tests modules are located into ../ledger_qatesting_realworld01/QAtesting/Tests
          -1: (Selenium) Create a new user and logout to perform test number 2
          -2: (Selenium) Login again with the newly created user
          -3: (Selenium) Add a new post article using default test strings from config.py + a random test ID.
          -4: (Selenium) Click the favorite button on the newly created article, from the home page "global feed" section.
          -5: (API-requests) Authenticate the user that we have created before.
